{"version":3,"sources":["./src/app/pages/payment/payment.page.html","./src/app/pages/payment/payment.module.ts","./src/app/pages/payment/payment.page.scss","./src/app/pages/payment/payment.page.ts","./src/app/services/nfc.service.ts","./src/app/services/payment.service.ts"],"names":[],"mappings":"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","file":"pages-payment-payment-module-es5.js","sourcesContent":["module.exports = \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons>\\n      <ng-template [ngIf]=\\\"checkoutProductId\\\">\\n          <ion-back-button color=\\\"secondary\\\" [defaultHref]=\\\"'/checkout/' + checkoutProductId\\\"></ion-back-button>\\n      </ng-template>\\n      <ion-title>Payment</ion-title>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ng-template [ngIf]=\\\"orderId\\\">\\n    <div class=\\\"ion-padding content-wrapper\\\">\\n      <ion-card class=\\\"form-wrapper\\\">\\n        <ng-template [ngIf]=\\\"nfcAccepted_bool == true\\\">\\n          <div class=\\\"nfc-wrapper\\\">\\n            <div class=\\\"nfc-btn\\\">\\n              <ion-button size=\\\"small\\\" (click)=\\\"NFCScan()\\\">\\n                <ion-icon name=\\\"wifi\\\"></ion-icon>\\n                <ion-ripple-effect type=\\\"unbounded\\\"></ion-ripple-effect>\\n              </ion-button>\\n            </div>\\n          </div>\\n        </ng-template>\\n        <h6 class=\\\"ion-text-center\\\">Total Payable</h6>\\n        <ng-template [ngIf]=\\\"amountPayable_nm\\\">\\n          <h4 class=\\\"ion-text-center\\\">RM {{ amountPayable_nm.toFixed(2) }}</h4>\\n        </ng-template>\\n        <p style=\\\"margin-bottom: 0px;\\\" class=\\\"ion-text-center\\\">Enter card details below{{ (nfcAccepted_bool == true ? \\\" | Read card using NFC\\\": \\\"\\\") }}</p>\\n        <ion-list>\\n          <ion-item>\\n            <ion-label color=\\\"primary\\\" position=\\\"floating\\\">Card Number</ion-label>\\n            <ion-input type=\\\"text\\\" [(ngModel)]=\\\"cardNumber_st\\\"></ion-input>\\n            <!-- placeholder=\\\"Enter your 16 digit card number\\\"  -->\\n          </ion-item>\\n          <ion-item>\\n            <ion-label color=\\\"primary\\\" position=\\\"floating\\\">Expiration Month</ion-label>\\n            <ion-input type=\\\"number\\\" [(ngModel)]=\\\"expMonth_st\\\"></ion-input>\\n            <!-- placeholder=\\\"Enter your card expiration month\\\" -->\\n          </ion-item>\\n          <ion-item>\\n            <ion-label color=\\\"primary\\\" position=\\\"floating\\\">Expiration Year</ion-label>\\n            <ion-input type=\\\"number\\\"\\n            [(ngModel)]=\\\"expYear_st\\\"></ion-input>\\n            <!-- placeholder=\\\"Enter your card expiration year\\\" -->\\n          </ion-item>\\n          <ion-item>\\n            <ion-label color=\\\"primary\\\" position=\\\"floating\\\">CVV</ion-label>\\n            <ion-input type=\\\"text\\\"\\n            [(ngModel)]=\\\"cvc_st\\\"></ion-input>\\n            <!-- placeholder=\\\"Enter your CVV\\\" -->\\n          </ion-item>\\n        </ion-list>\\n        <ion-button expand=\\\"full\\\" (click)=\\\"processPayment()\\\">\\n          Submit\\n          <ion-ripple-effect type=\\\"unbounded\\\"></ion-ripple-effect>\\n        </ion-button>\\n      </ion-card>\\n    </div>\\n  </ng-template>\\n</ion-content>\\n<ng-template [ngIf]=\\\"nfcAccepted_bool == true\\\">\\n  <div class=\\\"nfc-overlay hidden\\\">\\n    <ion-icon name=\\\"close-circle\\\" size=\\\"small\\\" class=\\\"nfc-close\\\" (click)=\\\"closeNFC()\\\"></ion-icon>\\n    <p class=\\\"nfc-caption\\\">Tap the card to your phone device</p>\\n  </div>\\n</ng-template>\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { PaymentPage } from './payment.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: PaymentPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [PaymentPage]\n})\nexport class PaymentPageModule {}\n","module.exports = \".content-wrapper {\\n  height: 100%;\\n  background-color: var(--ion-color-secondary);\\n}\\n\\n.nfc-wrapper {\\n  position: absolute;\\n  top: 15%;\\n  right: 10%;\\n}\\n\\n@-webkit-keyframes shake {\\n  0% {\\n    left: 0;\\n  }\\n  1% {\\n    left: -2px;\\n  }\\n  2% {\\n    left: 4px;\\n  }\\n  3% {\\n    left: -6px;\\n  }\\n  4% {\\n    left: 6px;\\n  }\\n  5% {\\n    left: -4px;\\n  }\\n  6% {\\n    left: 2px;\\n  }\\n  7% {\\n    left: 0;\\n  }\\n}\\n\\n@keyframes shake {\\n  0% {\\n    left: 0;\\n  }\\n  1% {\\n    left: -2px;\\n  }\\n  2% {\\n    left: 4px;\\n  }\\n  3% {\\n    left: -6px;\\n  }\\n  4% {\\n    left: 6px;\\n  }\\n  5% {\\n    left: -4px;\\n  }\\n  6% {\\n    left: 2px;\\n  }\\n  7% {\\n    left: 0;\\n  }\\n}\\n\\n.nfc-wrapper > .nfc-btn {\\n  position: relative;\\n  -webkit-animation-name: shake;\\n          animation-name: shake;\\n  -webkit-animation-duration: 3s;\\n          animation-duration: 3s;\\n  -webkit-animation-iteration-count: infinite;\\n          animation-iteration-count: infinite;\\n  -webkit-animation-timing-function: ease-in;\\n          animation-timing-function: ease-in;\\n}\\n\\n.form-wrapper {\\n  padding: 10px;\\n  background-color: white;\\n}\\n\\n.nfc-overlay {\\n  position: absolute;\\n  display: -webkit-box;\\n  display: flex;\\n  -webkit-box-align: center;\\n          align-items: center;\\n  top: 0;\\n  left: 0;\\n  width: 100%;\\n  height: 100%;\\n  background-color: white;\\n  z-index: 10;\\n}\\n\\n.nfc-close {\\n  position: absolute;\\n  top: 0.5rem;\\n  right: 0.5rem;\\n}\\n\\n.nfc-caption {\\n  text-align: center;\\n  margin: 0px;\\n  width: 100%;\\n}\\n\\n.hidden {\\n  display: none;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvcGF5bWVudC9DOlxcVXNlcnNcXGxcXERvY3VtZW50c1xcTW9iaWxlIFRlY2hub2xvZ3kgUHJvamVjdFxcRXZlcnlCdXkvc3JjXFxhcHBcXHBhZ2VzXFxwYXltZW50XFxwYXltZW50LnBhZ2Uuc2NzcyIsInNyYy9hcHAvcGFnZXMvcGF5bWVudC9wYXltZW50LnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLFlBQUE7RUFDQSw0Q0FBQTtBQ0NKOztBREVBO0VBQ0ksa0JBQUE7RUFDQSxRQUFBO0VBQ0EsVUFBQTtBQ0NKOztBREVBO0VBQ0k7SUFBSSxPQUFBO0VDRU47RURERTtJQUFJLFVBQUE7RUNJTjtFREhFO0lBQUksU0FBQTtFQ01OO0VETEU7SUFBSSxVQUFBO0VDUU47RURQRTtJQUFJLFNBQUE7RUNVTjtFRFRFO0lBQUksVUFBQTtFQ1lOO0VEWEU7SUFBSSxTQUFBO0VDY047RURiRTtJQUFJLE9BQUE7RUNnQk47QUFDRjs7QUR6QkE7RUFDSTtJQUFJLE9BQUE7RUNFTjtFRERFO0lBQUksVUFBQTtFQ0lOO0VESEU7SUFBSSxTQUFBO0VDTU47RURMRTtJQUFJLFVBQUE7RUNRTjtFRFBFO0lBQUksU0FBQTtFQ1VOO0VEVEU7SUFBSSxVQUFBO0VDWU47RURYRTtJQUFJLFNBQUE7RUNjTjtFRGJFO0lBQUksT0FBQTtFQ2dCTjtBQUNGOztBRGRBO0VBQ0ksa0JBQUE7RUFDQSw2QkFBQTtVQUFBLHFCQUFBO0VBQ0EsOEJBQUE7VUFBQSxzQkFBQTtFQUNBLDJDQUFBO1VBQUEsbUNBQUE7RUFDQSwwQ0FBQTtVQUFBLGtDQUFBO0FDZ0JKOztBRGJBO0VBQ0ksYUFBQTtFQUNBLHVCQUFBO0FDZ0JKOztBRGJBO0VBQ0ksa0JBQUE7RUFDQSxvQkFBQTtFQUFBLGFBQUE7RUFDQSx5QkFBQTtVQUFBLG1CQUFBO0VBQ0EsTUFBQTtFQUNBLE9BQUE7RUFDQSxXQUFBO0VBQ0EsWUFBQTtFQUNBLHVCQUFBO0VBQ0EsV0FBQTtBQ2dCSjs7QURiQTtFQUNJLGtCQUFBO0VBQ0EsV0FBQTtFQUNBLGFBQUE7QUNnQko7O0FEYkE7RUFDSSxrQkFBQTtFQUNBLFdBQUE7RUFDQSxXQUFBO0FDZ0JKOztBRGJBO0VBQ0ksYUFBQTtBQ2dCSiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL3BheW1lbnQvcGF5bWVudC5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuY29udGVudC13cmFwcGVyIHtcclxuICAgIGhlaWdodDogMTAwJTtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWlvbi1jb2xvci1zZWNvbmRhcnkpO1xyXG59XHJcblxyXG4ubmZjLXdyYXBwZXIge1xyXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgdG9wOiAxNSU7XHJcbiAgICByaWdodDogMTAlO1xyXG59XHJcblxyXG5Aa2V5ZnJhbWVzIHNoYWtlIHtcclxuICAgIDAlIHtsZWZ0OiAwfVxyXG4gICAgMSUge2xlZnQ6IC0ycHh9XHJcbiAgICAyJSB7bGVmdDogNHB4fVxyXG4gICAgMyUge2xlZnQ6IC02cHh9XHJcbiAgICA0JSB7bGVmdDogNnB4fVxyXG4gICAgNSUge2xlZnQ6IC00cHh9XHJcbiAgICA2JSB7bGVmdDogMnB4fVxyXG4gICAgNyUge2xlZnQ6IDB9XHJcbn1cclxuXHJcbi5uZmMtd3JhcHBlciA+IC5uZmMtYnRuIHtcclxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuICAgIGFuaW1hdGlvbi1uYW1lOiBzaGFrZTtcclxuICAgIGFuaW1hdGlvbi1kdXJhdGlvbjogM3M7XHJcbiAgICBhbmltYXRpb24taXRlcmF0aW9uLWNvdW50OiBpbmZpbml0ZTtcclxuICAgIGFuaW1hdGlvbi10aW1pbmctZnVuY3Rpb246IGVhc2UtaW47XHJcbn1cclxuXHJcbi5mb3JtLXdyYXBwZXIge1xyXG4gICAgcGFkZGluZzogMTBweDtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xyXG59XHJcblxyXG4ubmZjLW92ZXJsYXkge1xyXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgICB0b3A6IDA7XHJcbiAgICBsZWZ0OiAwO1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBoZWlnaHQ6IDEwMCU7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcclxuICAgIHotaW5kZXg6IDEwO1xyXG59XHJcblxyXG4ubmZjLWNsb3NlIHtcclxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgIHRvcDogMC41cmVtO1xyXG4gICAgcmlnaHQ6IDAuNXJlbTtcclxufVxyXG5cclxuLm5mYy1jYXB0aW9uIHtcclxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgIG1hcmdpbjogMHB4O1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbn1cclxuXHJcbi5oaWRkZW4ge1xyXG4gICAgZGlzcGxheTogbm9uZTtcclxufSIsIi5jb250ZW50LXdyYXBwZXIge1xuICBoZWlnaHQ6IDEwMCU7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWlvbi1jb2xvci1zZWNvbmRhcnkpO1xufVxuXG4ubmZjLXdyYXBwZXIge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogMTUlO1xuICByaWdodDogMTAlO1xufVxuXG5Aa2V5ZnJhbWVzIHNoYWtlIHtcbiAgMCUge1xuICAgIGxlZnQ6IDA7XG4gIH1cbiAgMSUge1xuICAgIGxlZnQ6IC0ycHg7XG4gIH1cbiAgMiUge1xuICAgIGxlZnQ6IDRweDtcbiAgfVxuICAzJSB7XG4gICAgbGVmdDogLTZweDtcbiAgfVxuICA0JSB7XG4gICAgbGVmdDogNnB4O1xuICB9XG4gIDUlIHtcbiAgICBsZWZ0OiAtNHB4O1xuICB9XG4gIDYlIHtcbiAgICBsZWZ0OiAycHg7XG4gIH1cbiAgNyUge1xuICAgIGxlZnQ6IDA7XG4gIH1cbn1cbi5uZmMtd3JhcHBlciA+IC5uZmMtYnRuIHtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBhbmltYXRpb24tbmFtZTogc2hha2U7XG4gIGFuaW1hdGlvbi1kdXJhdGlvbjogM3M7XG4gIGFuaW1hdGlvbi1pdGVyYXRpb24tY291bnQ6IGluZmluaXRlO1xuICBhbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOiBlYXNlLWluO1xufVxuXG4uZm9ybS13cmFwcGVyIHtcbiAgcGFkZGluZzogMTBweDtcbiAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XG59XG5cbi5uZmMtb3ZlcmxheSB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgdG9wOiAwO1xuICBsZWZ0OiAwO1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAxMDAlO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcbiAgei1pbmRleDogMTA7XG59XG5cbi5uZmMtY2xvc2Uge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogMC41cmVtO1xuICByaWdodDogMC41cmVtO1xufVxuXG4ubmZjLWNhcHRpb24ge1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIG1hcmdpbjogMHB4O1xuICB3aWR0aDogMTAwJTtcbn1cblxuLmhpZGRlbiB7XG4gIGRpc3BsYXk6IG5vbmU7XG59Il19 */\"","import { Component, OnInit } from '@angular/core';\nimport { LoadingController, ToastController, NavController } from '@ionic/angular';\nimport { ActivatedRoute, NavigationExtras } from \"@angular/router\";\n\nimport $ from 'jquery';\n\nimport { OrderService } from '../../services/order.service';\nimport { NfcService } from '../../services/nfc.service';\nimport { PaymentService } from '../../services/payment.service';\n\n@Component({\n  selector: 'app-payment',\n  templateUrl: './payment.page.html',\n  styleUrls: ['./payment.page.scss'],\n})\nexport class PaymentPage implements OnInit {\n  public orderId: string;\n  public checkoutProductId: string;\n  public amountPayable_nm: number;\n  public cardNumber_st: string;\n  public expMonth_st: string;\n  public expYear_st: string;\n  public cvc_st: string;\n  public nfcAccepted_bool: boolean;\n\n  constructor(\n    private loadingCtrl: LoadingController,\n    private toastCtrl: ToastController,\n    private navCtrl: NavController,\n    private route: ActivatedRoute,\n    private orderService: OrderService,\n    private nfcService: NfcService,\n    private paymentService: PaymentService\n  ) { }\n\n  ngOnInit() {\n  }\n\n  async presentLoading() {\n    const loading = await this.loadingCtrl.create({\n      message: 'Processing Payment'\n    });\n    await loading.present();\n  }\n\n  async presentToast(message) {\n    const toast = await this.toastCtrl.create({\n      message: message,\n      duration: 3000,\n      cssClass: \"toast-style\"\n    });\n    toast.present();\n  }\n\n  ionViewWillEnter() {\n    // initialize input fields\n    this.cardNumber_st = \"\";\n    this.expMonth_st = \"\";\n    this.expYear_st = \"\";\n    this.cvc_st = \"\";\n\n    this.route.queryParams.subscribe(params => {\n      this.orderId = params[\"order_id\"];\n      this.orderService.getOrderDetails(this.orderId)\n        .then((data) => {\n          this.checkoutProductId = data['product_id'];\n          this.amountPayable_nm = data['total_amount_nm'];\n        })\n        .catch((error) => {\n          this.presentToast(error);\n        });\n    });\n\n    this.nfcService.isEnabled()\n      .then((enabled: boolean) => {\n        this.nfcAccepted_bool = enabled;\n      });\n  }\n\n  NFCScan() {\n    $('.nfc-overlay').removeClass('hidden');\n    this.nfcService.read()\n      .then((card_obj) => {\n        this.closeNFC();\n\n        // assign card details\n        this.cardNumber_st = card_obj[\"cardNumber\"];\n        this.expMonth_st = card_obj[\"expMonth\"];\n        this.expYear_st = card_obj[\"expYear\"];\n        \n        // prompt for CVC\n        this.cvc_st = prompt(\"Please fill in the card CVC\");        \n      })\n      .catch((error) => {\n        this.presentToast(error);\n      });\n  }\n\n  closeNFC() {\n    // hide overlay\n    $('.nfc-overlay').addClass('hidden');\n    this.nfcService.close();\n  }\n\n  processPayment() {\n    this.presentLoading();\n    \n    let card_obj = {\n      number: this.cardNumber_st,\n      expMonth: parseInt(this.expMonth_st),\n      expYear: parseInt(this.expYear_st),\n      cvc: this.cvc_st\n    };\n\n    this.paymentService.makePayment(this.orderId, card_obj)\n      .then(() => {\n        this.loadingCtrl.dismiss();\n        this.presentToast(\"Payment Successful!\");\n        let navigationExtras: NavigationExtras = {\n          queryParams: {\n              order_id: this.orderId\n          }\n        };\n        this.navCtrl.navigateForward('/payment/payment-complete', navigationExtras);\n      })\n      .catch((error) => {\n        setTimeout(() => {\n          this.loadingCtrl.dismiss();\n        }, 2000);\n        this.presentToast(error);\n      });\n  }\n}","import { Injectable } from '@angular/core';\nimport { NFC } from '@ionic-native/nfc/ngx';\n\nimport { Subscription } from 'rxjs';\nimport { resolve } from 'url';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class NfcService {\n  private NFCSubscription: Subscription;\n\n\n  constructor(private nfc: NFC) { }\n\n  isEnabled() {\n    return new Promise((resolve, reject) => {\n      this.nfc.enabled()\n        .then(() => {\n          resolve(true);\n        })\n        .catch(() => {\n          reject(false);\n        });\n    });\n  }\n\n  read() {\n    return new Promise((resolve, reject) => {\n      this.NFCSubscription = this.nfc.addTagDiscoveredListener().subscribe(() => {\n        this.nfc.connect()\n          .finally(() => {\n            var readRequest = \"00A404000E325041592E5359532E444446303100\";\n            this.nfc.transceive(readRequest)\n              .then((responseData) => {\n                let aid_st = String(responseData).substring(String(responseData).lastIndexOf(\"4f07\") + 4, String(responseData).lastIndexOf(\"4f07\") + 18);\n                var readRequest = \"00A4040007\" + aid_st + \"00\";\n\n                this.nfc.transceive(readRequest)\n                  .then((responseData) => {\n                    console.log(\"aid read\", responseData);\n\n                    let readDataArr = [];\n                    \n                    var readRequest = \"00B2011400\";\n                    this.nfc.transceive(readRequest)\n                      .then((responseData) => {\n                        readDataArr.push(responseData);\n\n                        var readRequest = \"00B2021400\";\n                        this.nfc.transceive(readRequest)\n                          .then((responseData) => {\n                            readDataArr.push(responseData);\n                            \n                            var readRequest = \"00B2031400\";\n                            this.nfc.transceive(readRequest)\n                              .then((responseData) => {\n                                readDataArr.push(responseData);\n\n                                let card_number_st = \"\";\n                                let exp_month_st = \"\";\n                                let exp_year_st = \"\";\n\n                                readDataArr.forEach((bytesString: string, index) => {\n                                  console.log(index, bytesString);\n                                  if(bytesString.startsWith(\"70\")) {\n                                    if(bytesString.indexOf(\"5a08\") != -1) {\n                                      card_number_st = bytesString.substring(bytesString.indexOf(\"5a08\") + 4, bytesString.indexOf(\"5a08\") + 20);\n                                    }\n                                    else if(bytesString.indexOf(\"5713\") != -1) {\n                                      card_number_st = bytesString.substring(bytesString.indexOf(\"5713\") + 4, bytesString.indexOf(\"5713\") + 20);\n                                    }\n\n                                    if(bytesString.indexOf(\"5f2403\") != -1) {\n                                      exp_year_st = bytesString.substring(bytesString.indexOf(\"5f2403\") + 6, bytesString.indexOf(\"5f2403\") + 8);\n                                      exp_month_st = bytesString.substring(bytesString.indexOf(\"5f2403\") + 8, bytesString.indexOf(\"5f2403\") + 10);\n                                    }\n                                  }\n                                });\n\n                                if(card_number_st == \"\" || exp_month_st == \"\" || exp_year_st == \"\") {\n                                  this.nfc.close()\n                                  .finally(() => {\n                                    reject(\"Could not read card\");\n                                  });\n                                }\n                                else {\n                                  this.nfc.close()\n                                    .finally(() => {\n                                      let cardDetails = {\n                                        \"cardNumber\":  card_number_st,\n                                        \"expMonth\": exp_month_st,\n                                        \"expYear\": exp_year_st\n                                      };\n                                      resolve(cardDetails);\n                                    });\n                                }\n                              });\n                          });\n                      });\n                  });\n              })\n              .catch((error) => {\n                this.nfc.close()\n                  .finally(() => {\n                    reject(error);\n                  });\n              });\n          });\n        });\n    });\n  }\n\n  close() {\n    // unsubscribe read tag event\n    if(this.NFCSubscription) {\n      this.NFCSubscription.unsubscribe();\n      console.log(\"unsubscribe\");\n    }\n  }\n}","import { Injectable } from '@angular/core';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\n\nimport { Stripe } from '@ionic-native/stripe/ngx';\n\nimport { AppConfig } from '../app.config';\nimport { AuthService } from './auth.service';\n\nexport interface API_PAYMENT_DATA_RESPONSE {\n  code: number;\n  message: string;\n  data: Object;\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PaymentService {\n  private BASE_PAYMENT_API_URL = AppConfig.API_HOST_URL + \"/api/payment\";\n\n  constructor(private httpClient: HttpClient, private stripe: Stripe, private auth: AuthService) { }\n\n  makePayment(orderId, userCard_obj) {\n    return new Promise((resolve, reject) => {\n      this.auth.getUID()\n        .then((uid_st) => {\n          this.stripe.setPublishableKey('pk_test_HKC3vn1hzDGig9R73CBFs36A00eAwQClZm');\n\n          let card_obj = {\n            number: '4242424242424242',\n            expMonth: 12,\n            expYear: 2020,\n            cvc: '220'\n          };\n\n          this.stripe.createCardToken(card_obj)\n            .then((token) => {\n              let body = {\n                \"orderId\": orderId,\n                \"tokenId\": token.id\n              };\n              this.httpClient.post(this.BASE_PAYMENT_API_URL, body, { headers: new HttpHeaders(`Authorization: Bearer ${ uid_st }`) })\n                .subscribe((response: API_PAYMENT_DATA_RESPONSE) => {\n                  if(response.code == 20) {\n                    resolve();\n                  }\n                  else {\n                    reject(response.message);\n                  }\n                }, (error) => {\n                  reject(error);\n                });\n            })\n            .catch((error) => {\n              reject(\"Payment method not supported\");\n            });\n        })\n        .catch((error) => {\n          reject(\"Unable to get data\");\n        });\n    });\n  }\n}"],"sourceRoot":""}